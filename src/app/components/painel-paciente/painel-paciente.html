<div class="p-6 bg-gradient-to-br from-blue-50 to-gray-100 min-h-screen">
  <!-- Título -->
  <h1 class="text-3xl font-bold text-blue-800 mb-6 border-b pb-2 text-center">Painel do Paciente</h1>

  <!-- Botão para redirecionar ao agendamento -->
  <div class="flex justify-end mb-10">
    <a href="/consulta"
      class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition inline-flex items-center gap-2">
      ➕ Agendar Nova Consulta
    </a>
  </div>

  <!-- Consultas marcadas -->
  <section class="mb-10">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4 text-center">Minhas Consultas</h2>
    <div *ngIf="consultas.length > 0; else semConsultas" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let consulta of consultas" (click)="abrirModal(consulta)"
        class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition cursor-pointer border border-blue-100 hover:border-blue-300">
        <div class="space-y-2 text-gray-700">
          <p><strong class="text-blue-700">Médico:</strong> {{ consulta.medico }}</p>
          <p><strong class="text-blue-700">Data:</strong> {{ consulta.data }}</p>
          <p><strong class="text-blue-700">Hora:</strong> {{ consulta.hora }}</p>
          <p><strong class="text-blue-700">Status:</strong> {{ consulta.status }}</p>
        </div>
      </div>
    </div>
    <ng-template #semConsultas>
      <p class="text-gray-500 italic text-center">Nenhuma consulta marcada.</p>
    </ng-template>
  </section>

  <!-- Modal com fundo embaçado e fechamento ao clicar fora -->
  <div *ngIf="consultaSelecionada"
    class="fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50"
    (click)="consultaSelecionada = null">
    <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-md relative" (click)="$event.stopPropagation()">
      <!-- Botão de fechar no topo -->
      <button (click)="consultaSelecionada = null"
        class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl">×</button>

      <!-- Conteúdo do modal -->
      <h3 class="text-xl font-bold text-blue-700 mb-4 text-center">Detalhes da Consulta</h3>
      <div class="space-y-2 text-gray-700">
        <p><strong>Médico:</strong> {{ consultaSelecionada.medico }}</p>
        <p><strong>Data:</strong> {{ consultaSelecionada.data }}</p>
        <p><strong>Hora:</strong> {{ consultaSelecionada.hora }}</p>
        <p><strong>Status:</strong> {{ consultaSelecionada.status }}</p>
        <p><strong>Observação:</strong> {{ consultaSelecionada.observacao || 'Nenhuma observação.' }}</p>
      </div>

      <!-- Botão de fechar no rodapé -->
      <div class="mt-6 flex justify-end">
        <button (click)="consultaSelecionada = null"
          class="bg-red-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
          Fechar
        </button>
      </div>
    </div>
  </div>
</div>